<div
  id="splits-list"
  class="splits"
  (mousewheel)="onScroll($event)"
  style="min-height: 300px; height: 300px; overflow: hidden;">

  <div class="row column-headers--row">
    <div class="col"></div>
    <div *ngIf="layout.columnThreeValue" class="col text-right">{{ getColumnHeaderLabel(layout.columnThreeValue) }}</div>
    <div *ngIf="layout.columnTwoValue" class="col text-right">{{ getColumnHeaderLabel(layout.columnTwoValue) }}</div>
    <div class="col text-right">{{ getColumnHeaderLabel(layout.columnOneValue) }}</div>
  </div>

  <div *ngFor="let splitDisplay of splitDisplays; last as isLast">
    <div *ngIf="!isLast">
      <ss-split
        [main-label]="splitDisplay.mainLabel"
        [is-done]="splitDisplay.isDone"
        [is-current]="splitDisplay.id === currentRun.currentSplitId"
        [is-alternating]="splitDisplay.isAlternating"
        [current-maximum-value]="splitMaximums[splitDisplay.id]"
        [column-one-value]="getColumnValue(layout.columnOneValue, currentRun, splitDisplay.id)"
        [column-two-value]="getColumnValue(layout.columnTwoValue, currentRun, splitDisplay.id)"
        [column-three-value]="getColumnValue(layout.columnThreeValue, currentRun, splitDisplay.id)">
      </ss-split>

      <div *ngIf="getIfAnySubsplitIsActive(splitDisplay, currentRun)">
        <div *ngFor="let subsplit of splitDisplay.subsplits; last as lastSubsplit">
          <ss-split
            [ngClass]="{ 'last-subsplit': lastSubsplit }"
            [main-label]="subsplit.mainLabel"
            [is-subsplit]="true"
            [is-done]="subsplit.isDone"
            [is-current]="subsplit.id === currentRun.currentSplitId"
            [is-alternating]="subsplit.isAlternating"
            [current-maximum-value]="splitMaximums[subsplit.id]"
            [column-one-value]="getColumnValue(layout.columnOneValue, currentRun, subsplit.id)"
            [column-two-value]="getColumnValue(layout.columnTwoValue, currentRun, subsplit.id)"
            [column-three-value]="getColumnValue(layout.columnThreeValue, currentRun, subsplit.id)">
          </ss-split>
        </div>
      </div>
    </div>
  </div>

</div>

<div class="splits final-split">
  <ss-split
    [main-label]="splitDisplays[splitDisplays.length-1].mainLabel"
    [is-done]="splitDisplays[splitDisplays.length-1].isDone"
    [is-current]="splitDisplays[splitDisplays.length-1].id === currentRun.currentSplitId"
    [is-alternating]="splitDisplays[splitDisplays.length-1].isAlternating"
    [is-final]="true"
    [column-one-value]="currentRun.splitFinishes[splitDisplays[splitDisplays.length-1].id]"
    [column-two-value]="currentRun.sumTable[splitDisplays[splitDisplays.length-1].id]">
  </ss-split>
</div>
